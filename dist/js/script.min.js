const menuButton=document.querySelector(".header__menu"),modalCloseButton=document.querySelector(".modal__close"),modalWindow=document.querySelector(".modal"),taskListContainer=document.querySelector(".todolist__tasks"),taskInput=document.querySelector(".modal__input"),addTaskButton=document.querySelector(".modal__button"),clearListButton=document.querySelector(".footer__clearlist"),modalForm=document.querySelector(".modal__form"),clearCompleteTaskButton=document.querySelector(".footer__cleartasks"),allTasksButton=document.querySelector(".item-all"),activeTasksButton=document.querySelector(".item-active"),completedTasksButton=document.querySelector(".item-complete"),localStorageTaskKey="tasks.list",localStorageSelectedTaskIdKey="tasks.selectedListId";let tasksList=JSON.parse(localStorage.getItem("tasks.list"))||[],selectedTaskId=localStorage.getItem("tasks.selectedListId");function createTask(e){return{id:Date.now().toString(),name:e,complete:!1}}function render(e){clearElement(taskListContainer),e.forEach((e,t)=>{const s=document.createElement("li");s.dataset.listId=e.id,s.classList.add("task"),s.innerHTML=`<div class="task__check">\n        <input type="checkbox" class="task__checkbox" />\n        <p class="task__text">${e.name}</p></div>\n        <span class="task__delete" onclick="removeTask(${t})">&cross;</span>`;const a=s.querySelector("input");a.id=e.id,a.checked=e.complete,taskListContainer.appendChild(s)})}function save(){localStorage.setItem("tasks.list",JSON.stringify(tasksList)),localStorage.setItem("tasks.selectedListId",selectedTaskId)}function clearElement(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function toggleComplete(e){e.checked?e.parentElement.classList.add("complete"):e.parentElement.classList.remove("complete")}function removeTask(e){tasksList.splice(e,1),save(),render(tasksList)}taskListContainer.addEventListener("click",e=>{if("input"===e.target.tagName.toLowerCase()){tasksList.find(t=>t.id===e.target.id).complete=e.target.checked,save()}}),modalForm.addEventListener("submit",e=>{e.preventDefault();const t=taskInput.value;if(null==t||""===t)return;const s=createTask(t);taskInput.value="",tasksList.push(s),save(),render(tasksList)}),render(tasksList),taskListContainer.addEventListener("change",e=>{"input"===e.target.tagName.toLowerCase()&&"checkbox"===e.target.type&&toggleComplete(e.target)}),menuButton.addEventListener("click",()=>{modalWindow.classList.add("modal-active")}),modalCloseButton.addEventListener("click",()=>{modalWindow.classList.remove("modal-active")}),clearCompleteTaskButton.addEventListener("click",e=>{tasksList=tasksList.filter(e=>!e.complete),save(),render(tasksList)}),clearListButton.addEventListener("click",e=>{clearElement(taskListContainer),tasksList=[],save(),render(tasksList)}),allTasksButton.addEventListener("click",()=>{clearElement(taskListContainer),save(),render(tasksList)}),activeTasksButton.addEventListener("click",()=>{clearElement(taskListContainer);const e=tasksList.filter(e=>!e.complete);save(),render(e)}),completedTasksButton.addEventListener("click",()=>{clearElement(taskListContainer);const e=tasksList.filter(e=>e.complete);save(),render(e)});